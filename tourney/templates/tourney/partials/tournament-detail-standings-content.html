<div id="tournament-content">
<section>
    {% if standings %}
        <h2>Tournament Standings</h2>
        <table>
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Player</th>
                    {% for criterion in enabled_criteria %}
                        <th>{{ criterion.get_name }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for standing in standings %}
                <tr{% if standing.is_dropped %} class="text-muted"{% endif %}>
                    <td><strong>{{ standing.tournament_rank }}</strong></td>
                    <td>
                        {{ standing.player.get_display_name }}
                        {% if standing.is_dropped %}
                            <span class="text-muted">(Dropped)</span>
                        {% endif %}
                    </td>
                    {% for criterion in enabled_criteria %}
                        <td>
                            {% with key=criterion.get_key %}
                                {% if not standing.is_in_current_stage %}
                                    <span class="text-muted">-</span>
                                {% elif key == 'points' %}
                                    {% if standing.points is not None %}{{ standing.points }}{% else %}<span class="text-muted">-</span>{% endif %}
                                {% elif key == 'wins' %}
                                    {% if standing.wins is not None %}{{ standing.wins }}{% else %}<span class="text-muted">-</span>{% endif %}
                                {% elif key == 'losses' %}
                                    {% if standing.losses is not None %}{{ standing.losses }}{% else %}<span class="text-muted">-</span>{% endif %}
                                {% elif key == 'strength_of_schedule' %}
                                    {% if standing.strength_of_schedule is not None %}{{ standing.strength_of_schedule|floatformat:2 }}{% else %}<span class="text-muted">-</span>{% endif %}
                                {% elif key == 'seed' %}
                                    {% if standing.seed is not None %}{{ standing.seed }}{% else %}<span class="text-muted">-</span>{% endif %}
                                {% elif key == 'head_to_head' %}
                                    {% if standing.head_to_head_value is not None %}{{ standing.head_to_head_value }}{% else %}<span class="text-muted">-</span>{% endif %}
                                {% elif key == 'random' %}
                                    {% if standing.is_in_current_stage %}<span class="text-muted">üïµÔ∏è</span>{% else %}<span class="text-muted">-</span>{% endif %}
                                {% elif key == 'player_score' %}
                                    {% if standing.player_score_value is not None %}{{ standing.player_score_value }}{% else %}<span class="text-muted">-</span>{% endif %}
                                {% elif key == 'opponent_score' %}
                                    {% if standing.opponent_score_value is not None %}{{ standing.opponent_score_value }}{% else %}<span class="text-muted">-</span>{% endif %}
                                {% elif key == 'score_differential' %}
                                    {% if standing.score_differential_value is not None %}{{ standing.score_differential_value }}{% else %}<span class="text-muted">-</span>{% endif %}
                                {% else %}
                                    <span class="text-muted">-</span>
                                {% endif %}
                            {% endwith %}
                        </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="text-muted">No standings available yet. Tournament needs to begin.</p>
    {% endif %}
</section>

{% if is_admin %}
<section>
    <h2>Player Management</h2>
    <div class="hstack">
        <div class="nav__item">
            <a href="{% url 'tourney-manage-players' tournament.id %}" class="button">Manage Players</a>
        </div>
    </div>
</section>
{% endif %}
</div>